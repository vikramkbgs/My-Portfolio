"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getHTML = exports.shouldTransform = void 0;

var _url = require("url");

var _utils = require("./utils");

const isPin = pathname => pathname.includes('pin/');

const isProfile = pathname => pathname.split('/').length === 1;

const isBoard = pathname => pathname.split('/').length === 2;

const shouldTransform = url => {
  const {
    host,
    pathname
  } = new _url.URL(url);
  const trimmedPathName = (0, _utils.getTrimmedPathName)(pathname);
  return ['pinterest.com', 'www.pinterest.com'].includes(host) && (isPin(trimmedPathName) || isProfile(trimmedPathName) || isBoard(trimmedPathName));
};

exports.shouldTransform = shouldTransform;

const getHTML = url => {
  const {
    pathname
  } = new _url.URL(url);
  const trimmedPathName = (0, _utils.getTrimmedPathName)(pathname);

  if (isPin(trimmedPathName)) {
    return `<a data-pin-do="embedPin" href="${url}"></a>`;
  }

  if (isBoard(trimmedPathName)) {
    return `<a data-pin-do="embedBoard" data-pin-board-width="400" data-pin-scale-height="240" data-pin-scale-width="80" href="${url}"></a>`;
  }

  return `<a data-pin-do="embedUser" data-pin-board-width="400" data-pin-scale-height="240" data-pin-scale-width="80" href="${url}"></a>`;
};

exports.getHTML = getHTML;